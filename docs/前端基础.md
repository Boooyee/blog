### 预解释和变量提升

JS在浏览器中执行大致分为两个阶段 `预解释阶段` （更准确是Parser）和 `执行阶段` 。我们平时写的JS代码并不是JS执行的代码，它需要预解释后，再由引擎执行。

JS预解释正式创建函数的执行环境（执行上下文），只有搞定了JS执行环境才能搞清楚一段代码执行后为什么产生这样的结果。

用一段代码表示创立的执行环境：

``` 
executionContextObj = {
  'scopeChain': { },
  'variableObject': { },
  'this': {}
}

```

* 作用域链（scopeChain）：包括下面提到的变量对象（variableObject）和所有父级执行上下文中的变量对象。
* 变量对象（variableObject）：与执行上下文相关的数据作用域，一个与上下文相关的特殊对象，其中存储了在上下文中定义的变量和函数声明。包括：变量、函数声明、函数的形参。

有了这些基本的概念梳理下JS引擎创建执行的过程：

* 创建阶段
  + 创建Scope chain
  + 创建variableObject
  + 设置this
* 执行阶段
  + 变量的值、函数的引用
  + 执行代码

变量对象的创建细节

* 根据函数的参数，创建并初始化arguments object
* 扫描函数内部代码，查找函数声明（Function declaration）
  * 对于所有找到的函数声明，将函数名和函数引用存入变量对象中
  * 如果变量对象中已经有同名的函数，那么就进行覆盖
* 扫描函数内部代码，查找变量声明
  * 对于所有找到的变量声明，将变量名存入变量对象中，并初始化为undefined
  * 如果变量名称和已经存在的形参或函数相同，则变量声明不会干扰已经存在的这类属性
